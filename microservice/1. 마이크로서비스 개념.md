# 모노리스
- 애플리케이션이 한 덩어리로 구성
- 단일 프로세스를 통해 실행
- 한꺼번에 수정, 배포가 이뤄저야 함
- 한 덩어리의 단일 프로세스로 실행되기 때문에 하나가 실패하면 모두 실패
    - 예를 들어 한 쇼핑몰 웹 애플리케이션에서 결제 기능에서 문제가 발생할 경우 모든 시스템 (상품 조회, 장바구니, 회원 가입 등)이 작동하지 않을 수도 있음
- 클라우드에서 모노리스 서비스를 활용할 경우 스케일 아웃(scale-out) 대상은 전체 시스템이 됨.
- 확장성과, 유저 탄력성이 보장되지만, 비용이 호율적이지 않음 (한 덩어리의 애플리케이션이기 때문에 리소스를 더 많이 사용)

<img width="817" alt="image" src="https://github.com/rhqudco/TIL/assets/55828130/529b7059-48f7-416f-a885-75773003c70a">


# 마이크로서비스
- 애플리케이션이 여러 개의 서비스 조각으로 구성
    - 결제 모듈
    - 회원 모듈
    - 상품 모듈
    - 기타 등등
- 각 서비스는 각기 독립적 기능 제공
- 각 서비스가 사용하는 저장소는 다른 서비스와 __완전히__ 격리
- 따라서 별도 수정, 배포, 확장 가능
- 스케일 아웃 시 필요한 모듈만 지정하여 확장 및 유저 탄력성 제공 가능
- 서비스 하나의 실패는 전체가 아닌, 부분의 실패

<img width="667" alt="image" src="https://github.com/rhqudco/TIL/assets/55828130/161e012d-182e-43f3-8979-74d97ed5950d">

# 마이크로서비스 정의
- 공개된 Interface를 가지고 있으며, 데이터가 캡슐화 되어있는 서비스를 마이크로 서비스라고 칭한다.
    - 여기서의 데이터 캡슐화는 특정 __서비스A__가 __서비스B__에서 사용하는 데이터베이스에 접근할 때는 __서비스B__를 통해 해당 데이터베이스에 접근한다는 것
- 각 서비스는 개별 프로세스에서 실행되며, HTTP 같이 가벼운 수단을 통하여 통신한다.
- 각 서비스는 서로 다른 언어와, 데이터 저장 기술을 사용해도 HTTP 같은 수단을 통해 통신하여 접근하기 때문에 전혀 문제가 발생하지 않는다.

<img width="673" alt="image" src="https://github.com/rhqudco/TIL/assets/55828130/6c414433-8568-468d-ad54-2f2d3ff2be60">

## SOA
- 간단하게 SOA(Service Oriented Architecture)는 아래와 같은 특징을 가진다.
    - 서비스는 다르지만, DB는 하나만 사용하는 것을 허용 (즉, 여러 서비스에서 공통으로 DB 사용을 허용)
        - 그렇기 때문에 DB에서 테이블 변경 시 연관된 모든 서비스에 장애가 발생할 위험 존재
    - 공통 모듈을 두어 재사용성을 높임
        - 여러 서비스에서 공통 모듈에 의존하는 경우가 있기 때문에 공통 모듈 변경 시 의존하고 있는 다른 서비스들에 장애가 발생할 가능성 존재
        - MSA는 공통 모듈을 따로 빼지 않고, 각 모듈마다 공통된 코드를 작성하여 MSA 철학에 따라 독립적인 빌드, 배포가 가능하도록 함
            - 추후 공통 모듈 변경 시 다른 모듈에 영향 발생하지 않음

__출처: 인프런 한정헌 지식공유자님 강의 Microservice 내부 아키텍처 와 EventStorming 설계__